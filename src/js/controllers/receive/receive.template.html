<dag-nav-bar state-title="Receive Dagcoins"></dag-nav-bar>

<div ng-controller="receiveController as home">
    <div class="onGoingProcess" ng-show="index.isOffline">
        <div class="onGoingProcess-content" ng-style="{'background-color':'#222'}">
            <div class="spinner">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
            </div>
            <span translate>Reconnecting to Wallet Service...</span>
        </div>
    </div>

    <div class="onGoingProcess" ng-show="index.anyOnGoingProcess && !index.isOffline">
        <div class="onGoingProcess-content" ng-style="{'background-color':'#222'}">
            <div class="spinner">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
            </div>
            <span translate ng-show="
        index.onGoingProcessName == 'openingWallet'
        || index.onGoingProcessName == 'updatingStatus'
        || index.onGoingProcessName == 'updatingBalance'
        || index.onGoingProcessName == 'updatingPendingTxps'
        "> Updating Wallet... </span>
            <span translate ng-show="index.onGoingProcessName == 'scanning'">Scanning Wallet funds...</span>
            <span translate ng-show="index.onGoingProcessName == 'recreating'">Recreating Wallet...</span>
            <span translate ng-show="index.onGoingProcessName == 'generatingCSV'">Generating .csv file...</span>
            <span translate ng-show="index.onGoingProcessName == 'Syncing'">Syncing... {{index.syncProgress}}</span>
            <span translate ng-show="index.onGoingProcessName == 'sending'">Sending...</span>
        </div>
    </div>

    <div class="onGoingProcess" ng-show="home.onGoingProcess && !index.anyOnGoingProces && !index.isOffline">
        <div class="onGoingProcess-content" ng-style="{'background-color':'#222'}">
            <div class="spinner">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
            </div>
            {{home.onGoingProcess|translate}}...
        </div>
    </div>

    <div class="oh" ng-show="!index.noFocusedWallet">


        <!--

        receive

        -->
        <div id="receive" class="receive p-share content scrollable" style="padding-bottom: 0">
            <div ng-show="index.needsBackup" class="p60t row text-center">
                <div class="large-12 columns">
                    <div class="text-warning text-bold m15b">
                        <i class="fi-alert"></i>
                        <span translate>
              WARNING: Backup needed
            </span>
                    </div>
                    <div class="text-gray" translate>
                        Before receiving funds, it is highly recommended you backup your wallet keys.
                    </div>

                    <button class="m20t button black expand round"
                            ng-click="$root.go('backup')" ng-style="{'background-color':index.backgroundColor}">
                        <span translate>Backup now</span>
                    </button>
                </div>
            </div>
            <div class="p-wrap" ng-show="!index.needsBackup">

                <!-- Address-->

                <h2 class="text-center m10t" translate>
                    <div class="page-heading"><span>Receive <span>Dagcoin's</span></span></div>
                </h2>
                <div class="page-qr text-center">
                    <div class="box-notification" ng-show="home.addrError">
                <span class="text-warning">
                  {{home.addrError|translate}}
                </span>
                    </div>

                    <div ng-click="home.copyAddress(home.addr[index.walletId])"
                         ng-show="home.addr[index.walletId] || home.generatingAddress">
                        <qrcode size="220" data="{{home.protocol}}:{{home.addr[index.walletId]}}"></qrcode>
                        <div ng-show="home.generatingAddress" style="position:relative; top:-226px; height:0px">
                            <div style="height:220px; width:220px; margin:auto; background: url(img/qr.png) white">
                                <div class="spinner" style="margin-top:80px">
                                    <div class="rect1"></div>
                                    <div class="rect2"></div>
                                    <div class="rect3"></div>
                                    <div class="rect4"></div>
                                    <div class="rect5"></div>
                                </div>
                            </div>
                        </div>
                        <div class="m10t" ng-hide>
                            <h4 ng-class="{'enable_text_select': !index.isCordova}" class="size-12">
                                {{index.shared_address || (home.generatingAddress ? '...' : home.addr[index.walletId])}}

                            </h4>
                        </div>
                    </div>
                </div>
                <div class="page-action">
                    <a ng-if="!index.shared_address" href="#" class="btn btn_red-full" ng-click="home.setAddress(true)"
                       ng-disabled="home.blockUx || index.isOffline ||home.generatingAddress" translate>
                        Generate new address
                    </a>
                    <a ng-show="index.isCordova" href="#" ng-click="home.shareAddress(home.addr[index.walletId])"
                       class="btn btn_red-full">Share wallet link</a>
                    <div ng-show="index.isCordova" class="page-action__info">
                        <span>Share the link above to receive payments.</span></div>

                </div>

            </div>
        </div> <!-- END Receive -->


        <div id="{{view.id}}" class="{{view.class}} tab-view" ng-repeat="view in index.addonViews"
             ng-include="view.template">
        </div>

    </div>
</div>
<div class="extra-margin-bottom"></div>
<dag-bottom-bar></dag-bottom-bar>